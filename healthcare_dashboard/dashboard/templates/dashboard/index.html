<!DOCTYPE html>
<html>
<head>
    <title>Healthcare Claims Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

<h1>US Healthcare Claims Dashboard</h1>

<h2>Summary</h2>
<p><strong>Total Claims:</strong> {{ total_claims }}</p>
<p><strong>Total Cost:</strong> ${{ total_cost }}</p>

<h2>Top Spending Patient</h2>
<p>{{ top_patient }}</p>

<h2>Top 10 Services</h2>
<table border="1">
<tr>
    <th>Service</th>
    <th>Total Cost</th>
</tr>
{% for service in top_services %}
<tr>
    <td>{{ service.Service }}</td>
    <td>{{ service.total_cost }}</td>
</tr>
{% endfor %}
</table>

<h2>Cost by Gender</h2>
<canvas id="genderChart"></canvas>

<script>
var genderData = {{ cost_by_gender|safe }};

var labels = genderData.map(item => item.Gender);
var costs = genderData.map(item => item.total_cost);

new Chart(document.getElementById('genderChart'), {
    type: 'bar',
    data: {
        labels: labels,
        datasets: [{
            label: 'Cost by Gender',
            data: costs
        }]
    }
});
</script>

</body>
</html>